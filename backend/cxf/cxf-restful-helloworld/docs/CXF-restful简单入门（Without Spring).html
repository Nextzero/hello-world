<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <meta name="content-class" content="maxiang"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="6214"/>

<div><span lang="v2" style="color: #2c3f51; font-size: 14; font-family: 微软雅黑, 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; max-width: 1000px; margin: auto auto; line-height: 1.6;"><del style="position:relative;display:block;z-index:10;"><a href="http://maxiang.io/#/?provider=evernote&amp;guid=bccedf9d-9f4f-441d-b075-c973dc7dfabb&amp;notebook=cxf" style="position: absolute;color: #FFF;text-decoration: none;font-size: 12px;height: 25px;border-radius: 0;margin-top: -20px;right: 15px;background: rgba(0, 0, 0, 0);border-left: 10px solid #BB3A34;border-right: 10px solid #BB3A34;border-bottom: 5px solid rgba(0, 0, 0, 0);width: 0;text-indent:-100000px;">Edit</a></del><div style="color: #2c3f51; font-family: 微软雅黑, 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; max-width: 1000px; margin: auto auto; line-height: 1.6; font-size: 16px;">
                        
                    



<h1 style="font-size: 2.6em; margin: 1.2em 0 .6em 0; font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; text-align: start;"><a name="cxf-restful简单入门without-spring" style="background: transparent; color: #1980e6; text-decoration: none;"></a>CXF-restful简单入门（Without Spring)</h1>

<p style="margin: 0 0 1.1em; line-height: 1.6;"></p>

<div style="line-height: 1.6; font-size: 16px;"><div style="line-height: 1.6; font-size: 16px;"><div style="line-height: 1.6; font-size: 16px;">
<ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;">
<li style="line-height: 1.6;"><a href="#cxf-restful简单入门without-spring" style="background: transparent; color: #1980e6; text-decoration: none;">CXF-restful简单入门（Without Spring)</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;">
<li style="line-height: 1.6;"><a href="#预备知识" style="background: transparent; color: #1980e6; text-decoration: none;">预备知识</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;">
<li style="line-height: 1.6;"><a href="#jax-rs" style="background: transparent; color: #1980e6; text-decoration: none;">JAX-RS</a></li>
<li style="line-height: 1.6;"><a href="#jax-ws" style="background: transparent; color: #1980e6; text-decoration: none;">JAX-WS</a></li>
</ul>
</li>
<li style="line-height: 1.6;"><a href="#一场景模拟" style="background: transparent; color: #1980e6; text-decoration: none;">一、场景（模拟）</a></li>
<li style="line-height: 1.6;"><a href="#二业务实现" style="background: transparent; color: #1980e6; text-decoration: none;">二、业务实现</a></li>
<li style="line-height: 1.6;"><a href="#三cxf" style="background: transparent; color: #1980e6; text-decoration: none;">三、CXF</a></li>
<li style="line-height: 1.6;"><a href="#四验证" style="background: transparent; color: #1980e6; text-decoration: none;">四、验证</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>

<blockquote style="padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;">
  <p style="margin: 0 0 1.1em; font-size: 1em; font-weight: 300; margin-bottom: 0; line-height: 1.6;">Apache CXF is an open source services framework. CXF helps you build and develop services using frontend programming APIs, like JAX-WS and JAX-RS. These services can speak a variety of protocols such as SOAP, XML/HTTP, RESTful HTTP, or CORBA and work over a variety of transports such as HTTP, JMS or JBI.</p>
</blockquote>



<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 2.15em; margin: 1.2em 0 .6em 0; text-align: start;"><a name="预备知识" style="background: transparent; color: #1980e6; text-decoration: none;"></a>预备知识</h2>



<h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="jax-rs" style="background: transparent; color: #1980e6; text-decoration: none;"></a>JAX-RS</h3>

<p style="margin: 0 0 1.1em; line-height: 1.6;">JAX-RS是JAVA EE6 引入的一个新技术。 JAX-RS即Java API for RESTful Web Services，是一个Java 编程语言的应用程序接口，支持按照表述性状态转移（REST）架构风格创建Web服务。JAX-RS使用了Java SE5引入的Java标注来简化Web服务的客户端和服务端的开发和部署。</p>

<p style="margin: 0 0 1.1em; line-height: 1.6;">JAX-RS提供了一些标注将一个资源类，一个POJO Java类，封装为Web资源。</p>

<p style="margin: 0 0 1.1em; line-height: 1.6;">包括： <br/>
Path，标注资源类或者方法的相对路径 <br/>
GET，@PUT，@POST，@DELETE，标注方法是HTTP请求的类型。 <br/>
Produces，标注返回的MIME媒体类型 <br/>
Consumes，标注可接受请求的MIME媒体类型 <br/>
PathParam，@QueryParam，@HeaderParam，@CookieParam，@MatrixParam，@FormParam,分别标注方法的参数来自于HTTP请求的不同位置，例如@PathParam来自于URL的路径，@QueryParam来自于URL的查询参数，@HeaderParam来自于HTTP请求的头信息，@CookieParam来自于HTTP请求的Cookie。</p>



<h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="jax-ws" style="background: transparent; color: #1980e6; text-decoration: none;"></a>JAX-WS</h3>

<p style="margin: 0 0 1.1em; line-height: 1.6;">JAX-WS(Java API for XML Web Services)规范是一组XML web services的JAVA API，JAX-WS允许开发者可以选择RPC-oriented或者message-oriented 来实现自己的web services。</p>

<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 2.15em; margin: 1.2em 0 .6em 0; text-align: start;"><a name="一场景模拟" style="background: transparent; color: #1980e6; text-decoration: none;"></a>一、场景（模拟）</h2>

<p style="margin: 0 0 1.1em; line-height: 1.6;"><a href="http://localhost:9999/userservice" style="background: transparent; color: #1980e6; text-decoration: none;" target="_blank">http://localhost:9999/userservice</a>为用户资源，现需要对用户资源进行“添加”、“删除”、“修改”、“查询”操作，数据格式为XML。接口定义如下：</p>

<ul style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;"><li style="line-height: 1.6;">GET <a href="http://localhost:9999/userservice/123" style="background: transparent; color: #1980e6; text-decoration: none;" target="_blank">http://localhost:9999/userservice/123</a> 查询id为123的用户信息</li>
<li style="line-height: 1.6;">POST <a href="http://localhost:9999/userservice" style="background: transparent; color: #1980e6; text-decoration: none;" target="_blank">http://localhost:9999/userservice</a> 添加用户</li>
<li style="line-height: 1.6;">PUT <a href="http://localhost:9999/userservice" style="background: transparent; color: #1980e6; text-decoration: none;" target="_blank">http://localhost:9999/userservice</a> 修改用户信息</li>
<li style="line-height: 1.6;">DELETE <a href="http://localhost:9999/userservice/123" style="background: transparent; color: #1980e6; text-decoration: none;" target="_blank">http://localhost:9999/userservice/123</a> 删除id为123的用户信息</li>
</ul>



<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 2.15em; margin: 1.2em 0 .6em 0; text-align: start;"><a name="二业务实现" style="background: transparent; color: #1980e6; text-decoration: none;"></a>二、业务实现</h2>

<p style="margin: 0 0 1.1em; line-height: 1.6;"><strong style="font-weight: bold; line-height: 1.6;">User</strong></p>



<pre style="font-family: 'Source Code Pro',monospace; white-space: pre-wrap; display: block; background-color: rgba(102,128,153,0.05); color: #333; word-wrap: break-word; font-size: .9em; background: #f6f6f6; line-height: 1.6; margin: 0 0 1.1em; padding: 0; border: 0; border-radius: 5px; text-align: start; word-break: break-all;"><code style="font-family: 'Source Code Pro',monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #f8f8f2; display: block; background: #23241f; padding: 1.3em 2em;"><span style="line-height: 1.6;">@XmlRootElement</span>(name=<span style="line-height: 1.6; color: #e6db74;">&quot;user&quot;</span>)<br/><span style="line-height: 1.6; color: #f92672;">public</span> <span style="line-height: 1.6;"><span style="line-height: 1.6; color: #66d9ef;">class</span> <span style="line-height: 1.6; color: #a6e22e; font-style: italic;">User</span> </span>{<br/>    String id;<br/>    String name;<br/><br/>    <span style="line-height: 1.6; color: #f92672;"><span style="line-height: 1.6; color: #66d9ef;">public</span> String <span style="line-height: 1.6; color: #a6e22e;">getId</span><span style="line-height: 1.6; color: #f8f8f2;">()</span> </span>{<br/>        <span style="line-height: 1.6; color: #f92672;">return</span> id;<br/>    }<br/>    <span style="line-height: 1.6; color: #f92672;"><span style="line-height: 1.6; color: #66d9ef;">public</span> <span style="line-height: 1.6; color: #66d9ef;">void</span> <span style="line-height: 1.6; color: #a6e22e;">setId</span><span style="line-height: 1.6; color: #f8f8f2;">(String id)</span> </span>{<br/>        <span style="line-height: 1.6; color: #f92672;">this</span>.id = id;<br/>    }<br/><br/>    <span style="line-height: 1.6; color: #f92672;"><span style="line-height: 1.6; color: #66d9ef;">public</span> String <span style="line-height: 1.6; color: #a6e22e;">getName</span><span style="line-height: 1.6; color: #f8f8f2;">()</span> </span>{<br/>        <span style="line-height: 1.6; color: #f92672;">return</span> name;<br/>    }<br/>    <span style="line-height: 1.6; color: #f92672;"><span style="line-height: 1.6; color: #66d9ef;">public</span> <span style="line-height: 1.6; color: #66d9ef;">void</span> <span style="line-height: 1.6; color: #a6e22e;">setName</span><span style="line-height: 1.6; color: #f8f8f2;">(String name)</span> </span>{<br/>        <span style="line-height: 1.6; color: #f92672;">this</span>.name = name;<br/>    }<br/>}<br/></code></pre>

<p style="margin: 0 0 1.1em; line-height: 1.6;"><strong style="font-weight: bold; line-height: 1.6;">UserService</strong> <br/>
为了方便，不必要将数据持久化到数据库，而是存在一个静态的Map中。 </p>



<pre style="font-family: 'Source Code Pro',monospace; white-space: pre-wrap; display: block; background-color: rgba(102,128,153,0.05); color: #333; word-wrap: break-word; font-size: .9em; background: #f6f6f6; line-height: 1.6; margin: 0 0 1.1em; padding: 0; border: 0; border-radius: 5px; text-align: start; word-break: break-all;"><code style="font-family: 'Source Code Pro',monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #f8f8f2; display: block; background: #23241f; padding: 1.3em 2em;"><br/><span style="line-height: 1.6;">@Path</span>(<span style="line-height: 1.6; color: #e6db74;">&quot;/userservice&quot;</span>)<br/><span style="line-height: 1.6; color: #f92672;">public</span> <span style="line-height: 1.6;"><span style="line-height: 1.6; color: #66d9ef;">class</span> <span style="line-height: 1.6; color: #a6e22e; font-style: italic;">UserService</span> </span>{<br/>    <span style="line-height: 1.6; color: #f92672;">protected</span> <span style="line-height: 1.6; color: #f92672;">static</span> Map&lt;String, User&gt; userList = <span style="line-height: 1.6; color: #f92672;">new</span> ConcurrentHashMap&lt;String, User&gt;();<br/><br/>    <span style="line-height: 1.6; color: #f92672;"><span style="line-height: 1.6; color: #66d9ef;">public</span> <span style="line-height: 1.6; color: #a6e22e;">UserService</span><span style="line-height: 1.6; color: #f8f8f2;">()</span> </span>{<br/>        System.out.println(<span style="line-height: 1.6; color: #e6db74;">&quot;UserService对象构造函数！&quot;</span>);<br/>    }<br/><br/>    <span style="line-height: 1.6;">@GET</span><br/>    <span style="line-height: 1.6;">@Path</span>(<span style="line-height: 1.6; color: #e6db74;">&quot;/{id}&quot;</span>)<br/>    <span style="line-height: 1.6;">@Produces</span>(<span style="line-height: 1.6; color: #e6db74;">&quot;application/xml&quot;</span>)<br/>    <span style="line-height: 1.6; color: #f92672;"><span style="line-height: 1.6; color: #66d9ef;">public</span> User <span style="line-height: 1.6; color: #a6e22e;">getUser</span><span style="line-height: 1.6; color: #f8f8f2;">(@PathParam(<span style="line-height: 1.6; color: #e6db74;">&quot;id&quot;</span>)</span>String id )</span>{<br/>        System.out.println(<span style="line-height: 1.6; color: #e6db74;">&quot;get user by id= &quot;</span>+id);<br/>        <span style="line-height: 1.6; color: #f92672;">return</span> userList.get(id);<br/>    }<br/><br/><br/>    <span style="line-height: 1.6;">@POST</span><br/>    <span style="line-height: 1.6;">@Produces</span>(<span style="line-height: 1.6; color: #e6db74;">&quot;application/xml&quot;</span>)<br/>    <span style="line-height: 1.6; color: #f92672;"><span style="line-height: 1.6; color: #66d9ef;">public</span> <span style="line-height: 1.6; color: #66d9ef;">void</span> <span style="line-height: 1.6; color: #a6e22e;">addUser</span><span style="line-height: 1.6; color: #f8f8f2;">(@FormParam(<span style="line-height: 1.6; color: #e6db74;">&quot;id&quot;</span>)</span> String id,@<span style="line-height: 1.6; color: #a6e22e;">FormParam</span><span style="line-height: 1.6; color: #f8f8f2;">(<span style="line-height: 1.6; color: #e6db74;">&quot;name&quot;</span>)</span> String name)</span>{<br/>        System.out.println(<span style="line-height: 1.6; color: #e6db74;">&quot;add user which id is:&quot;</span> + id);<br/>        User user = <span style="line-height: 1.6; color: #f92672;">new</span> User();<br/>        user.setId(id);<br/>        user.setName(name);<br/>        userList.put(id, user);<br/>    }<br/><br/>    <span style="line-height: 1.6;">@PUT</span><br/>    <span style="line-height: 1.6;">@Produces</span>(<span style="line-height: 1.6; color: #e6db74;">&quot;application/xml&quot;</span>)<br/>    <span style="line-height: 1.6; color: #f92672;"><span style="line-height: 1.6; color: #66d9ef;">public</span> <span style="line-height: 1.6; color: #66d9ef;">void</span> <span style="line-height: 1.6; color: #a6e22e;">updateUser</span><span style="line-height: 1.6; color: #f8f8f2;">(@FormParam(<span style="line-height: 1.6; color: #e6db74;">&quot;id&quot;</span>)</span> String id,@<span style="line-height: 1.6; color: #a6e22e;">FormParam</span><span style="line-height: 1.6; color: #f8f8f2;">(<span style="line-height: 1.6; color: #e6db74;">&quot;name&quot;</span>)</span> String name)</span>{<br/>        System.out.println(<span style="line-height: 1.6; color: #e6db74;">&quot;put user which id is:&quot;</span> + id);<br/>        User user = <span style="line-height: 1.6; color: #f92672;">new</span> User();<br/>        user.setId(id);<br/>        user.setName(name);<br/>        userList.put(id, user);<br/>    }<br/><br/>    <span style="line-height: 1.6;">@DELETE</span><br/>    <span style="line-height: 1.6;">@Path</span>(<span style="line-height: 1.6; color: #e6db74;">&quot;/{id}&quot;</span>)<br/>    <span style="line-height: 1.6; color: #f92672;"><span style="line-height: 1.6; color: #66d9ef;">public</span> <span style="line-height: 1.6; color: #66d9ef;">void</span> <span style="line-height: 1.6; color: #a6e22e;">deleteUser</span><span style="line-height: 1.6; color: #f8f8f2;">(@PathParam(<span style="line-height: 1.6; color: #e6db74;">&quot;id&quot;</span>)</span>String id)</span>{<br/>        System.out.println(<span style="line-height: 1.6; color: #e6db74;">&quot;remove user by id= &quot;</span> + id);<br/>        userList.remove(id);<br/>    }<br/>}<br/></code></pre>



<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 2.15em; margin: 1.2em 0 .6em 0; text-align: start;"><a name="三cxf" style="background: transparent; color: #1980e6; text-decoration: none;"></a>三、CXF</h2>

<p style="margin: 0 0 1.1em; line-height: 1.6;">下面通过cxf框架发布服务！ <br/>
<strong style="font-weight: bold; line-height: 1.6;">maven</strong></p>



<pre style="font-family: 'Source Code Pro',monospace; white-space: pre-wrap; display: block; background-color: rgba(102,128,153,0.05); color: #333; word-wrap: break-word; font-size: .9em; background: #f6f6f6; line-height: 1.6; margin: 0 0 1.1em; padding: 0; border: 0; border-radius: 5px; text-align: start; word-break: break-all;"><code style="font-family: 'Source Code Pro',monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #f8f8f2; display: block; background: #23241f; padding: 1.3em 2em;"><span style="line-height: 1.6; color: #f8f8f2;">&lt;<span style="line-height: 1.6; color: #f92672;">dependency</span>&gt;</span><br/>    <span style="line-height: 1.6; color: #f8f8f2;">&lt;<span style="line-height: 1.6; color: #f92672;">groupId</span>&gt;</span>org.apache.cxf<span style="line-height: 1.6; color: #f8f8f2;">&lt;/<span style="line-height: 1.6; color: #f92672;">groupId</span>&gt;</span><br/>    <span style="line-height: 1.6; color: #f8f8f2;">&lt;<span style="line-height: 1.6; color: #f92672;">artifactId</span>&gt;</span>cxf-rt-frontend-jaxrs<span style="line-height: 1.6; color: #f8f8f2;">&lt;/<span style="line-height: 1.6; color: #f92672;">artifactId</span>&gt;</span><br/>    <span style="line-height: 1.6; color: #f8f8f2;">&lt;<span style="line-height: 1.6; color: #f92672;">version</span>&gt;</span>3.1.0<span style="line-height: 1.6; color: #f8f8f2;">&lt;/<span style="line-height: 1.6; color: #f92672;">version</span>&gt;</span><br/><span style="line-height: 1.6; color: #f8f8f2;">&lt;/<span style="line-height: 1.6; color: #f92672;">dependency</span>&gt;</span><br/><br/><span style="line-height: 1.6; color: #f8f8f2;">&lt;<span style="line-height: 1.6; color: #f92672;">dependency</span>&gt;</span><br/>    <span style="line-height: 1.6; color: #f8f8f2;">&lt;<span style="line-height: 1.6; color: #f92672;">groupId</span>&gt;</span>org.apache.cxf<span style="line-height: 1.6; color: #f8f8f2;">&lt;/<span style="line-height: 1.6; color: #f92672;">groupId</span>&gt;</span><br/>    <span style="line-height: 1.6; color: #f8f8f2;">&lt;<span style="line-height: 1.6; color: #f92672;">artifactId</span>&gt;</span>cxf-rt-transports-http-jetty<span style="line-height: 1.6; color: #f8f8f2;">&lt;/<span style="line-height: 1.6; color: #f92672;">artifactId</span>&gt;</span><br/>    <span style="line-height: 1.6; color: #f8f8f2;">&lt;<span style="line-height: 1.6; color: #f92672;">version</span>&gt;</span>3.1.0<span style="line-height: 1.6; color: #f8f8f2;">&lt;/<span style="line-height: 1.6; color: #f92672;">version</span>&gt;</span><br/><span style="line-height: 1.6; color: #f8f8f2;">&lt;/<span style="line-height: 1.6; color: #f92672;">dependency</span>&gt;</span><br/></code></pre>



<pre style="font-family: 'Source Code Pro',monospace; white-space: pre-wrap; display: block; background-color: rgba(102,128,153,0.05); color: #333; word-wrap: break-word; font-size: .9em; background: #f6f6f6; line-height: 1.6; margin: 0 0 1.1em; padding: 0; border: 0; border-radius: 5px; text-align: start; word-break: break-all;"><code style="font-family: 'Source Code Pro',monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #f8f8f2; display: block; background: #23241f; padding: 1.3em 2em;"><span style="line-height: 1.6; color: #f92672;">import</span> org.apache.cxf.jaxrs.JAXRSServerFactoryBean;<br/><br/><span style="line-height: 1.6; color: #f92672;">public</span> <span style="line-height: 1.6;"><span style="line-height: 1.6; color: #66d9ef;">class</span> <span style="line-height: 1.6; color: #a6e22e; font-style: italic;">ServerMain</span> </span>{<br/><br/>    <span style="line-height: 1.6; color: #f92672;"><span style="line-height: 1.6; color: #66d9ef;">public</span> <span style="line-height: 1.6; color: #66d9ef;">static</span> <span style="line-height: 1.6; color: #66d9ef;">void</span> <span style="line-height: 1.6; color: #a6e22e;">main</span><span style="line-height: 1.6; color: #f8f8f2;">(String[] args)</span> </span>{<br/>        JAXRSServerFactoryBean sf = <span style="line-height: 1.6; color: #f92672;">new</span> JAXRSServerFactoryBean();<br/>        <span style="line-height: 1.6; color: #75715e;">//sf.setResourceClasses(UserService.class);</span><br/>        sf.setServiceBean(<span style="line-height: 1.6; color: #f92672;">new</span> UserService());<br/>        sf.setAddress(<span style="line-height: 1.6; color: #e6db74;">&quot;http://localhost:9999/&quot;</span>);<br/>        sf.create();<br/>    }<br/>}<br/></code></pre>

<p style="margin: 0 0 1.1em; line-height: 1.6;">值得注意的是：</p>

<ul style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;"><li style="line-height: 1.6;"><code style="font-family: 'Source Code Pro',monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">JAXRSServerFactoryBean</code>内部将创建服务并监听端口。</li>
<li style="line-height: 1.6;">通过<code style="font-family: 'Source Code Pro',monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">setResourceClasses</code>可指定业务实现类，如UserService.class</li>
<li style="line-height: 1.6;">默认情况下，由cxf框架负责管理resource classes的生命周期，默认为每次请求都new 一个resource class实例。若需要实现单实例，如添加如下代码<code style="font-family: 'Source Code Pro',monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">sf.setResourceProvider(UserService.class, new SingletonResourceProvider(new UserService()));</code></li>
<li style="line-height: 1.6;">可使用其他方法管理resource classes的生命周期（如spring），使用<code style="font-family: 'Source Code Pro',monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">setServiceBeans</code>代替<code style="font-family: 'Source Code Pro',monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">setResourceClasses</code>方法（本例则是使用该方法）。</li>
</ul>



<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 2.15em; margin: 1.2em 0 .6em 0; text-align: start;"><a name="四验证" style="background: transparent; color: #1980e6; text-decoration: none;"></a>四、验证</h2>

<p style="margin: 0 0 1.1em; line-height: 1.6;">通过火狐浏览器RESTClient工具进行测试，值得注意的是由于使用的是<code style="font-family: 'Source Code Pro',monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">FormParam</code>方式，因此POST、PUT接口需要添加http头<code style="font-family: 'Source Code Pro',monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">Content-Type:application/x-www-form-urlencoded</code>。</p>

<p style="margin: 0 0 1.1em; line-height: 1.6;"><strong style="font-weight: bold; line-height: 1.6;">添加用户</strong></p>



<p style="margin: 0 0 1.1em; line-height: 1.6;"><img src="CXF-restful简单入门（Without Spring)_files/.1485329362289.png" type="image/png" alt="Alt text" longdesc="./1485329362289.png" style="border: 0; vertical-align: middle; max-width: 100%;" title=""/></p>

<p style="margin: 0 0 1.1em; line-height: 1.6;"><strong style="font-weight: bold; line-height: 1.6;">查询用户</strong></p>



<p style="margin: 0 0 1.1em; line-height: 1.6;"><img src="CXF-restful简单入门（Without Spring)_files/.1485329399434.png" type="image/png" alt="Alt text" longdesc="./1485329399434.png" style="border: 0; vertical-align: middle; max-width: 100%;" title=""/></p>

<p style="margin: 0 0 1.1em; line-height: 1.6;"><strong style="font-weight: bold; line-height: 1.6;">删除用户</strong></p>



<p style="margin: 0 0 1.1em; line-height: 1.6;"><img src="CXF-restful简单入门（Without Spring)_files/.1485329415095.png" type="image/png" alt="Alt text" longdesc="./1485329415095.png" style="border: 0; vertical-align: middle; max-width: 100%;" title=""/></p></div><center style="display:none">%23CXF-restful%u7B80%u5355%u5165%u95E8%uFF08Without%20Spring%29%0A@%28cxf%29%5Bcxf%2C%20demo%2C%20DEMO%5D%0A%0A%5Btoc%5D%0A%0A%0A%3E%20Apache%20CXF%20is%20an%20open%20source%20services%20framework.%20CXF%20helps%20you%20build%20and%20develop%20services%20using%20frontend%20programming%20APIs%2C%20like%20JAX-WS%20and%20JAX-RS.%20These%20services%20can%20speak%20a%20variety%20of%20protocols%20such%20as%20SOAP%2C%20XML/HTTP%2C%20RESTful%20HTTP%2C%20or%20CORBA%20and%20work%20over%20a%20variety%20of%20transports%20such%20as%20HTTP%2C%20JMS%20or%20JBI.%0A%0A%23%23%u9884%u5907%u77E5%u8BC6%0A%23%23%23JAX-RS%0AJAX-RS%u662FJAVA%20EE6%20%u5F15%u5165%u7684%u4E00%u4E2A%u65B0%u6280%u672F%u3002%20JAX-RS%u5373Java%20API%20for%20RESTful%20Web%20Services%uFF0C%u662F%u4E00%u4E2AJava%20%u7F16%u7A0B%u8BED%u8A00%u7684%u5E94%u7528%u7A0B%u5E8F%u63A5%u53E3%uFF0C%u652F%u6301%u6309%u7167%u8868%u8FF0%u6027%u72B6%u6001%u8F6C%u79FB%uFF08REST%uFF09%u67B6%u6784%u98CE%u683C%u521B%u5EFAWeb%u670D%u52A1%u3002JAX-RS%u4F7F%u7528%u4E86Java%20SE5%u5F15%u5165%u7684Java%u6807%u6CE8%u6765%u7B80%u5316Web%u670D%u52A1%u7684%u5BA2%u6237%u7AEF%u548C%u670D%u52A1%u7AEF%u7684%u5F00%u53D1%u548C%u90E8%u7F72%u3002%0A%0AJAX-RS%u63D0%u4F9B%u4E86%u4E00%u4E9B%u6807%u6CE8%u5C06%u4E00%u4E2A%u8D44%u6E90%u7C7B%uFF0C%u4E00%u4E2APOJO%20Java%u7C7B%uFF0C%u5C01%u88C5%u4E3AWeb%u8D44%u6E90%u3002%0A%0A%u5305%u62EC%uFF1A%0A@Path%uFF0C%u6807%u6CE8%u8D44%u6E90%u7C7B%u6216%u8005%u65B9%u6CD5%u7684%u76F8%u5BF9%u8DEF%u5F84%0A@GET%uFF0C@PUT%uFF0C@POST%uFF0C@DELETE%uFF0C%u6807%u6CE8%u65B9%u6CD5%u662FHTTP%u8BF7%u6C42%u7684%u7C7B%u578B%u3002%0A@Produces%uFF0C%u6807%u6CE8%u8FD4%u56DE%u7684MIME%u5A92%u4F53%u7C7B%u578B%0A@Consumes%uFF0C%u6807%u6CE8%u53EF%u63A5%u53D7%u8BF7%u6C42%u7684MIME%u5A92%u4F53%u7C7B%u578B%0A@PathParam%uFF0C@QueryParam%uFF0C@HeaderParam%uFF0C@CookieParam%uFF0C@MatrixParam%uFF0C@FormParam%2C%u5206%u522B%u6807%u6CE8%u65B9%u6CD5%u7684%u53C2%u6570%u6765%u81EA%u4E8EHTTP%u8BF7%u6C42%u7684%u4E0D%u540C%u4F4D%u7F6E%uFF0C%u4F8B%u5982@PathParam%u6765%u81EA%u4E8EURL%u7684%u8DEF%u5F84%uFF0C@QueryParam%u6765%u81EA%u4E8EURL%u7684%u67E5%u8BE2%u53C2%u6570%uFF0C@HeaderParam%u6765%u81EA%u4E8EHTTP%u8BF7%u6C42%u7684%u5934%u4FE1%u606F%uFF0C@CookieParam%u6765%u81EA%u4E8EHTTP%u8BF7%u6C42%u7684Cookie%u3002%0A%0A%23%23%23JAX-WS%0AJAX-WS%28Java%20API%20for%20XML%20Web%20Services%29%u89C4%u8303%u662F%u4E00%u7EC4XML%20web%20services%u7684JAVA%20API%uFF0CJAX-WS%u5141%u8BB8%u5F00%u53D1%u8005%u53EF%u4EE5%u9009%u62E9RPC-oriented%u6216%u8005message-oriented%20%u6765%u5B9E%u73B0%u81EA%u5DF1%u7684web%20services%u3002%0A%0A%23%23%u4E00%u3001%u573A%u666F%uFF08%u6A21%u62DF%uFF09%0Ahttp%3A//localhost%3A9999/userservice%u4E3A%u7528%u6237%u8D44%u6E90%uFF0C%u73B0%u9700%u8981%u5BF9%u7528%u6237%u8D44%u6E90%u8FDB%u884C%u201C%u6DFB%u52A0%u201D%u3001%u201C%u5220%u9664%u201D%u3001%u201C%u4FEE%u6539%u201D%u3001%u201C%u67E5%u8BE2%u201D%u64CD%u4F5C%uFF0C%u6570%u636E%u683C%u5F0F%u4E3AXML%u3002%u63A5%u53E3%u5B9A%u4E49%u5982%u4E0B%uFF1A%0A-%20GET%20http%3A//localhost%3A9999/userservice/123%20%u67E5%u8BE2id%u4E3A123%u7684%u7528%u6237%u4FE1%u606F%0A-%20POST%20http%3A//localhost%3A9999/userservice%20%u6DFB%u52A0%u7528%u6237%0A-%20PUT%20http%3A//localhost%3A9999/userservice%20%u4FEE%u6539%u7528%u6237%u4FE1%u606F%0A-%20DELETE%20http%3A//localhost%3A9999/userservice/123%20%u5220%u9664id%u4E3A123%u7684%u7528%u6237%u4FE1%u606F%0A%0A%23%23%u4E8C%u3001%u4E1A%u52A1%u5B9E%u73B0%0A**User**%0A%60%60%60java%0A@XmlRootElement%28name%3D%22user%22%29%0Apublic%20class%20User%20%7B%0A%20%20%20%20String%20id%3B%0A%20%20%20%20String%20name%3B%0A%0A%20%20%20%20public%20String%20getId%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20id%3B%0A%20%20%20%20%7D%0A%20%20%20%20public%20void%20setId%28String%20id%29%20%7B%0A%20%20%20%20%20%20%20%20this.id%20%3D%20id%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20public%20String%20getName%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20name%3B%0A%20%20%20%20%7D%0A%20%20%20%20public%20void%20setName%28String%20name%29%20%7B%0A%20%20%20%20%20%20%20%20this.name%20%3D%20name%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A**UserService**%0A%u4E3A%u4E86%u65B9%u4FBF%uFF0C%u4E0D%u5FC5%u8981%u5C06%u6570%u636E%u6301%u4E45%u5316%u5230%u6570%u636E%u5E93%uFF0C%u800C%u662F%u5B58%u5728%u4E00%u4E2A%u9759%u6001%u7684Map%u4E2D%u3002%20%0A%60%60%60java%0A%0A@Path%28%22/userservice%22%29%0Apublic%20class%20UserService%20%7B%0A%20%20%20%20protected%20static%20Map%3CString%2C%20User%3E%20userList%20%3D%20new%20ConcurrentHashMap%3CString%2C%20User%3E%28%29%3B%0A%0A%20%20%20%20public%20UserService%28%29%20%7B%0A%20%20%20%20%20%20%20%20System.out.println%28%22UserService%u5BF9%u8C61%u6784%u9020%u51FD%u6570%uFF01%22%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20@GET%0A%20%20%20%20@Path%28%22/%7Bid%7D%22%29%0A%20%20%20%20@Produces%28%22application/xml%22%29%0A%20%20%20%20public%20User%20getUser%28@PathParam%28%22id%22%29String%20id%20%29%7B%0A%20%20%20%20%20%20%20%20System.out.println%28%22get%20user%20by%20id%3D%20%22+id%29%3B%0A%20%20%20%20%20%20%20%20return%20userList.get%28id%29%3B%0A%20%20%20%20%7D%0A%0A%0A%20%20%20%20@POST%0A%20%20%20%20@Produces%28%22application/xml%22%29%0A%20%20%20%20public%20void%20addUser%28@FormParam%28%22id%22%29%20String%20id%2C@FormParam%28%22name%22%29%20String%20name%29%7B%0A%20%20%20%20%20%20%20%20System.out.println%28%22add%20user%20which%20id%20is%3A%22%20+%20id%29%3B%0A%20%20%20%20%20%20%20%20User%20user%20%3D%20new%20User%28%29%3B%0A%20%20%20%20%20%20%20%20user.setId%28id%29%3B%0A%20%20%20%20%20%20%20%20user.setName%28name%29%3B%0A%20%20%20%20%20%20%20%20userList.put%28id%2C%20user%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20@PUT%0A%20%20%20%20@Produces%28%22application/xml%22%29%0A%20%20%20%20public%20void%20updateUser%28@FormParam%28%22id%22%29%20String%20id%2C@FormParam%28%22name%22%29%20String%20name%29%7B%0A%20%20%20%20%20%20%20%20System.out.println%28%22put%20user%20which%20id%20is%3A%22%20+%20id%29%3B%0A%20%20%20%20%20%20%20%20User%20user%20%3D%20new%20User%28%29%3B%0A%20%20%20%20%20%20%20%20user.setId%28id%29%3B%0A%20%20%20%20%20%20%20%20user.setName%28name%29%3B%0A%20%20%20%20%20%20%20%20userList.put%28id%2C%20user%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20@DELETE%0A%20%20%20%20@Path%28%22/%7Bid%7D%22%29%0A%20%20%20%20public%20void%20deleteUser%28@PathParam%28%22id%22%29String%20id%29%7B%0A%20%20%20%20%20%20%20%20System.out.println%28%22remove%20user%20by%20id%3D%20%22%20+%20id%29%3B%0A%20%20%20%20%20%20%20%20userList.remove%28id%29%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%u4E09%u3001CXF%0A%u4E0B%u9762%u901A%u8FC7cxf%u6846%u67B6%u53D1%u5E03%u670D%u52A1%uFF01%0A**maven**%0A%60%60%60xml%0A%3Cdependency%3E%0A%20%20%20%20%3CgroupId%3Eorg.apache.cxf%3C/groupId%3E%0A%20%20%20%20%3CartifactId%3Ecxf-rt-frontend-jaxrs%3C/artifactId%3E%0A%20%20%20%20%3Cversion%3E3.1.0%3C/version%3E%0A%3C/dependency%3E%0A%0A%3Cdependency%3E%0A%20%20%20%20%3CgroupId%3Eorg.apache.cxf%3C/groupId%3E%0A%20%20%20%20%3CartifactId%3Ecxf-rt-transports-http-jetty%3C/artifactId%3E%0A%20%20%20%20%3Cversion%3E3.1.0%3C/version%3E%0A%3C/dependency%3E%0A%60%60%60%0A%0A%60%60%60java%0Aimport%20org.apache.cxf.jaxrs.JAXRSServerFactoryBean%3B%0A%0Apublic%20class%20ServerMain%20%7B%0A%0A%20%20%20%20public%20static%20void%20main%28String%5B%5D%20args%29%20%7B%0A%20%20%20%20%20%20%20%20JAXRSServerFactoryBean%20sf%20%3D%20new%20JAXRSServerFactoryBean%28%29%3B%0A%20%20%20%20%20%20%20%20//sf.setResourceClasses%28UserService.class%29%3B%0A%20%20%20%20%20%20%20%20sf.setServiceBean%28new%20UserService%28%29%29%3B%0A%20%20%20%20%20%20%20%20sf.setAddress%28%22http%3A//localhost%3A9999/%22%29%3B%0A%20%20%20%20%20%20%20%20sf.create%28%29%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%u503C%u5F97%u6CE8%u610F%u7684%u662F%uFF1A%0A-%20%60JAXRSServerFactoryBean%60%u5185%u90E8%u5C06%u521B%u5EFA%u670D%u52A1%u5E76%u76D1%u542C%u7AEF%u53E3%u3002%0A-%20%u901A%u8FC7%60setResourceClasses%60%u53EF%u6307%u5B9A%u4E1A%u52A1%u5B9E%u73B0%u7C7B%uFF0C%u5982UserService.class%0A-%20%u9ED8%u8BA4%u60C5%u51B5%u4E0B%uFF0C%u7531cxf%u6846%u67B6%u8D1F%u8D23%u7BA1%u7406resource%20classes%u7684%u751F%u547D%u5468%u671F%uFF0C%u9ED8%u8BA4%u4E3A%u6BCF%u6B21%u8BF7%u6C42%u90FDnew%20%u4E00%u4E2Aresource%20class%u5B9E%u4F8B%u3002%u82E5%u9700%u8981%u5B9E%u73B0%u5355%u5B9E%u4F8B%uFF0C%u5982%u6DFB%u52A0%u5982%u4E0B%u4EE3%u7801%60sf.setResourceProvider%28UserService.class%2C%20new%20SingletonResourceProvider%28new%20UserService%28%29%29%29%3B%60%0A-%20%u53EF%u4F7F%u7528%u5176%u4ED6%u65B9%u6CD5%u7BA1%u7406resource%20classes%u7684%u751F%u547D%u5468%u671F%uFF08%u5982spring%uFF09%uFF0C%u4F7F%u7528%60setServiceBeans%60%u4EE3%u66FF%60setResourceClasses%60%u65B9%u6CD5%uFF08%u672C%u4F8B%u5219%u662F%u4F7F%u7528%u8BE5%u65B9%u6CD5%uFF09%u3002%0A%0A%23%23%u56DB%u3001%u9A8C%u8BC1%0A%u901A%u8FC7%u706B%u72D0%u6D4F%u89C8%u5668RESTClient%u5DE5%u5177%u8FDB%u884C%u6D4B%u8BD5%uFF0C%u503C%u5F97%u6CE8%u610F%u7684%u662F%u7531%u4E8E%u4F7F%u7528%u7684%u662F%60FormParam%60%u65B9%u5F0F%uFF0C%u56E0%u6B64POST%u3001PUT%u63A5%u53E3%u9700%u8981%u6DFB%u52A0http%u5934%60Content-Type%3Aapplication/x-www-form-urlencoded%60%u3002%0A%0A%0A**%u6DFB%u52A0%u7528%u6237**%0A%21%5BAlt%20text%5D%28./1485329362289.png%29%0A%0A**%u67E5%u8BE2%u7528%u6237**%0A%21%5BAlt%20text%5D%28./1485329399434.png%29%0A%0A**%u5220%u9664%u7528%u6237**%0A%21%5BAlt%20text%5D%28./1485329415095.png%29%0A%0A%0A%0A</center><br/></span>
</div></body></html> 